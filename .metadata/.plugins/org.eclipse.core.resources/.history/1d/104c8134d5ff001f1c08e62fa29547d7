#include <avr/io.h>
#include <avr/sleep.h>
#include <util/delay.h>

#define BIT(a) (1 << a)

#ifndef cbi
#define cbi(sfr, bit)     (_SFR_BYTE(sfr) &= ~_BV(bit))
#endif
#ifndef sbi
#define sbi(sfr, bit)     (_SFR_BYTE(sfr) |= _BV(bit))
#endif



static int sense(void)
{
    unsigned char i=0;
    DDRB  = 0x00;
    PORTB = 0x00;

    DDRB |= _BV(PB1);
    DDRB |= _BV(PB0);
    _delay_us(5);
    DDRB &= ~_BV(PB1);
    DDRB &= ~_BV(PB0);

    PORTB |= _BV(PB0);
    for(i=0; i<255 && !(PINC & _BV(PB0)); i++)
    {
        DDRB |=  _BV(PB0);
        _delay_us(5);
        DDRB &= ~_BV(PB0);
        DDRB |=  _BV(PB1);
        _delay_us(20);
        DDRB &= ~_BV(PB1);
    }
    DDRB |= _BV(PB1);
    DDRB |= _BV(PB0);
    PORTB = 0x00;

    return i;
}


int main()
{
	while(1)
	{
		PORTB |= (1<< PB3);
		_delay_ms(10);
		PORTB &= 0xff ^ (1<< PB3);
		_delay_ms(10);
	}
}
